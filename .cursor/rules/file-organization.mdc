---
description: File organization standards, naming conventions, directory structure, and clutter prevention rules
globs: ["**/*"]
alwaysApply: true
---

# File Organization & Clean Project Structure

## Core Principle

**A clean project structure is essential for maintainability, discoverability, and developer productivity. Every file must have a clear purpose and location.**

## Root Directory Standards

### ✅ ALLOWED in Root Directory

Only these essential files belong in root:

**Project Metadata:**
- `README.md` - Project overview and quick start
- `CHANGELOG.md` - Version history (optional)
- `LICENSE` - License file
- `CONTRIBUTING.md` - Contribution guidelines (optional, can be in `docs/`)

**Configuration Files:**
- `package.json`, `pnpm-workspace.yaml`, `turbo.json`
- `tsconfig.json`, `.eslintrc.js`, `.prettierrc.js`
- `.gitignore`, `.editorconfig`, `.nvmrc`
- `jest.config.js`, `playwright.config.ts`
- `docker-compose.yml`, `.dockerignore`

**CI/CD Configuration:**
- `.github/workflows/` directory
- `.husky/` directory
- `.circleci/` or `.gitlab-ci.yml` (if used)

**Build Artifacts (Generated):**
- `dist/`, `build/`, `.next/` (in `.gitignore`)
- `node_modules/` (in `.gitignore`)
- `.turbo/` (in `.gitignore`)

### ❌ FORBIDDEN in Root Directory

**Documentation Files:**
- `IMPLEMENTATION_*.md` → `docs/implementation/`
- `DEVELOPMENT.md` → `docs/DEVELOPMENT.md`
- `CODING_STANDARDS.md` → `docs/CODING_STANDARDS.md`
- `USAGE_GUIDE.md` → `docs/USAGE_GUIDE.md`
- `SETUP_COMPLETE.md` → `docs/implementation/`
- `MIGRATION_GUIDE.md` → `docs/MIGRATION_GUIDE.md`
- `API_UPDATES.md` → `docs/API_UPDATES.md`

**Source Code:**
- `src/` → `apps/backend/src/` or `apps/frontend/src/`
- `lib/` → `packages/shared/src/`
- `utils/` → `packages/shared/src/utils/`

**Test Files:**
- `tests/` → Already correct (E2E/integration)
- Unit tests → Colocated with source files

**Temporary/Backup Files:**
- `*.bak`, `*.backup`, `*.old`, `*.tmp`
- `*_backup*`, `*_old*`, `*_fixed*`, `*_v2*`
- See `.cursor/rules/git-workflow.mdc` for complete list

## Directory Structure Standards

### Monorepo Structure

```
kompass/
├── apps/                    # Applications
│   ├── backend/            # NestJS API
│   └── frontend/           # React PWA
├── packages/               # Shared packages
│   └── shared/             # Shared types/utils
├── docs/                   # ALL documentation
│   ├── README.md          # Documentation index
│   ├── DEVELOPMENT.md     # Development guide
│   ├── implementation/    # Implementation reports
│   ├── architectur/       # Architecture docs
│   ├── reviews/           # Review documents
│   └── product-vision/    # Product vision
├── tests/                  # E2E and integration tests
├── scripts/                # Development scripts
├── templates/              # Code generation templates
├── .github/                # CI/CD workflows
├── .husky/                 # Git hooks
├── README.md              # ✅ Project overview
├── CHANGELOG.md           # ✅ Version history
├── LICENSE                # ✅ License
└── [config files]         # ✅ Configuration only
```

### Documentation Organization

**All documentation MUST be in `docs/` directory:**

```
docs/
├── README.md                    # Documentation index
├── CHANGELOG.md                 # Version history
├── DEVELOPMENT.md               # Development guide
├── CODING_STANDARDS.md          # Coding standards
├── USAGE_GUIDE.md               # Usage guide
├── MIGRATION_GUIDE.md           # Migration instructions
├── API_UPDATES.md               # API documentation
├── implementation/              # Implementation reports
│   ├── IMPLEMENTATION_COMPLETE.md
│   ├── IMPLEMENTATION_SUMMARY.md
│   └── SETUP_COMPLETE.md
├── architectur/                 # Architecture documentation
├── reviews/                     # Review documents
├── product-vision/              # Product vision docs
└── personas/                    # User personas
```

## File Naming Conventions

### Code Files

**Backend (NestJS):**
- `kebab-case.ts` for files: `customer.service.ts`, `create-customer.dto.ts`
- `PascalCase` for classes: `CustomerService`, `CreateCustomerDto`

**Frontend (React):**
- `PascalCase.tsx` for components: `CustomerList.tsx`, `CustomerCard.tsx`
- `camelCase.ts` for hooks: `useCustomer.ts`, `useCustomerFilters.ts`
- `kebab-case.ts` for utilities: `api-client.ts`, `date-utils.ts`

**Shared Package:**
- `kebab-case.ts` for all files: `id-generator.ts`, `validation-utils.ts`

### Test Files

- Unit tests: `*.spec.ts` (colocated with source)
- E2E tests: `*.e2e.spec.ts` (in `tests/e2e/`)
- Integration tests: `*.integration.spec.ts` (in `tests/integration/`)

### Documentation Files

- `UPPER_SNAKE_CASE.md` for major docs: `API_SPECIFICATION.md`
- `kebab-case.md` for guides: `migration-guide.md`
- `PascalCase.md` for reports: `ImplementationSummary.md`

### Configuration Files

- `.kebab-case` for dotfiles: `.eslintrc.js`, `.prettierrc.js`
- `kebab-case.json` for config: `tsconfig.json`, `package.json`

## Forbidden File Patterns

### Duplicate/Version Patterns

**NEVER create files with these patterns:**

```bash
# Backup patterns
*_backup*, *.backup*, *.bak, *~, *.swp, *.tmp

# Version patterns
*_v[0-9]*, *.v[0-9]*, *_version*, *.version*

# Status patterns
*_fixed*, *.fixed*, *_final*, *.final*, *_working*, *.working*

# Old/temporary patterns
*_old*, *.old*, *_temp*, *.temp*, *_tmp*, *.tmp*

# Copy patterns
*_copy*, *.copy*, *_copy[0-9]*

# Date patterns
*_[0-9]{4}-[0-9]{2}-[0-9]{2}*

# Test patterns (use __tests__/ instead)
*_test.ts, *.test.ts
```

**See `.cursor/rules/git-workflow.mdc` for complete list and enforcement.**

## File Organization Rules

### Rule 1: One File, One Purpose

Each file should have a single, clear purpose:

```typescript
// ✅ CORRECT: Single purpose
// customer.service.ts - Customer business logic only
// customer.controller.ts - HTTP endpoints only
// customer.repository.ts - Database operations only

// ❌ WRONG: Multiple purposes
// customer.ts - Contains service, controller, and repository
```

### Rule 2: Colocate Related Files

Keep related files together:

```bash
# ✅ CORRECT: Colocated
customer/
├── customer.service.ts
├── customer.service.spec.ts      # Test next to source
├── customer.controller.ts
└── customer.repository.ts

# ❌ WRONG: Scattered
src/services/customer.service.ts
src/controllers/customer.controller.ts
tests/customer.service.spec.ts    # Test far from source
```

### Rule 3: Use Directories for Grouping

Group related files in directories:

```bash
# ✅ CORRECT: Grouped in directories
customer/
├── dto/
│   ├── create-customer.dto.ts
│   ├── update-customer.dto.ts
│   └── customer-response.dto.ts
└── entities/
    └── customer.entity.ts

# ❌ WRONG: Flat structure
create-customer.dto.ts
update-customer.dto.ts
customer-response.dto.ts
customer.entity.ts
```

### Rule 4: No Empty Directories

If a directory is empty, either:
- Add a `README.md` explaining its purpose
- Remove the directory
- Add `.gitkeep` if directory must exist but is empty

### Rule 5: No Orphaned Files

Every file must be:
- Referenced in code (imported)
- Referenced in documentation
- Part of a build/test process
- Or explicitly marked as deprecated/legacy

## Clean Project Checklist

Before committing, verify:

- [ ] No files in root except allowed files
- [ ] No duplicate/backup file patterns (`*_backup*`, `*.old`, etc.)
- [ ] All documentation in `docs/` directory
- [ ] All source code in `apps/` or `packages/`
- [ ] All tests colocated or in `tests/`
- [ ] No empty directories (or have README)
- [ ] No orphaned files
- [ ] File names follow conventions
- [ ] No temporary files committed

## Enforcement

### Pre-Commit Hooks

Pre-commit hooks MUST check for:
1. Forbidden file patterns (backup, old, copy, etc.)
2. Files in wrong directories
3. Empty directories without README
4. Documentation files in root

### CI/CD Checks

CI/CD pipelines MUST:
1. Scan for forbidden patterns
2. Verify directory structure
3. Check for root directory violations
4. Validate file naming conventions

### Code Review Checklist

Reviewers MUST check:
1. No duplicate files created
2. Files in correct directories
3. Proper naming conventions
4. No temporary/backup files

## Examples

### ✅ CORRECT: Clean Structure

```
kompass/
├── README.md                    # ✅ Root - project overview
├── package.json                 # ✅ Root - config
├── docs/
│   ├── DEVELOPMENT.md           # ✅ Docs in docs/
│   └── implementation/
│       └── IMPLEMENTATION_COMPLETE.md  # ✅ Implementation reports
├── apps/
│   └── backend/
│       └── src/
│           └── modules/
│               └── customer/
│                   ├── customer.service.ts      # ✅ Proper location
│                   └── customer.service.spec.ts # ✅ Colocated test
```

### ❌ WRONG: Cluttered Structure

```
kompass/
├── README.md
├── IMPLEMENTATION_COMPLETE.md   # ❌ Should be in docs/
├── DEVELOPMENT.md               # ❌ Should be in docs/
├── customer.service.ts          # ❌ Should be in apps/backend/
├── customer.service.backup.ts   # ❌ Forbidden pattern
├── customer.service.old.ts      # ❌ Forbidden pattern
└── src/                         # ❌ Should be in apps/
    └── customer.ts
```

## References

- Documentation Organization: `.cursor/rules/documentation-organization.mdc` - Documentation structure standards
- Git Workflow: `.cursor/rules/git-workflow.mdc` - No file duplication rules
- Project Structure: `.cursor/rules/project-structure.mdc` - Directory organization
