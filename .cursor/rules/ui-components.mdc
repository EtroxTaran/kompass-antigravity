---
description: CRITICAL - Use shadcn/ui and RadixUI ONLY. Never create custom UI components. Accessibility requirements (WCAG 2.1 AA) and mobile-first responsive design
globs: ["**/*.tsx", "**/*.jsx", "**/components/**/*.ts"]
alwaysApply: true
---

# UI Components Rules

## CRITICAL RULE: shadcn/ui and RadixUI ONLY

**NEVER create custom UI components. ALWAYS use shadcn/ui (built on RadixUI).**

shadcn/ui provides accessible, customizable components built on RadixUI primitives and styled with Tailwind CSS. All components are copied into your project, allowing full customization while maintaining accessibility standards.

## Component Installation

### Installing shadcn/ui Components

When you need a component, use the shadcn CLI:

```bash
# Install shadcn/ui CLI (if not already installed)
pnpm dlx shadcn-ui@latest add button
pnpm dlx shadcn-ui@latest add input
pnpm dlx shadcn-ui@latest add form
pnpm dlx shadcn-ui@latest add table
pnpm dlx shadcn-ui@latest add dialog
pnpm dlx shadcn-ui@latest add select
pnpm dlx shadcn-ui@latest add card
pnpm dlx shadcn-ui@latest add skeleton
# etc.
```

Components will be installed to `apps/frontend/src/components/ui/` directory.

### Available shadcn/ui Components

Common components available:
- `button`, `input`, `label`, `form`
- `table`, `card`, `dialog`, `sheet`
- `select`, `combobox`, `dropdown-menu`
- `tabs`, `accordion`, `alert`, `toast`
- `skeleton`, `spinner`, `progress`
- `calendar`, `date-picker`, `time-picker`
- `checkbox`, `radio-group`, `switch`
- `textarea`, `slider`, `separator`

## Component Usage

### ✅ CORRECT: Using shadcn/ui Components

```typescript
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { Card, CardHeader, CardTitle, CardContent } from '@/components/ui/card';

function CustomerForm() {
  return (
    <Card>
      <CardHeader>
        <CardTitle>New Customer</CardTitle>
      </CardHeader>
      <CardContent>
        <div className="space-y-4">
          <div className="space-y-2">
            <Label htmlFor="companyName">Company Name</Label>
            <Input id="companyName" placeholder="Enter company name" />
          </div>
          <Button type="submit">Save Customer</Button>
        </div>
      </CardContent>
    </Card>
  );
}
```

### ❌ WRONG: Creating Custom Components

```typescript
// ❌ NEVER create custom styled components
import styled from 'styled-components';

const CustomButton = styled.button`
  background: blue;
  padding: 10px;
  border-radius: 4px;
`; // NEVER DO THIS

// ❌ NEVER create custom button components
function CustomButton({ children }: { children: React.ReactNode }) {
  return (
    <button className="bg-blue-500 px-4 py-2 rounded">
      {children}
    </button>
  ); // NEVER DO THIS - use shadcn Button instead
}
```

## Component Composition

### ✅ CORRECT: Composing shadcn Components

```typescript
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';
import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';

function CustomerDialog() {
  return (
    <Dialog>
      <DialogTrigger asChild>
        <Button>New Customer</Button>
      </DialogTrigger>
      <DialogContent>
        <DialogHeader>
          <DialogTitle>Create Customer</DialogTitle>
        </DialogHeader>
        <div className="space-y-4">
          <div className="space-y-2">
            <Label htmlFor="name">Company Name</Label>
            <Input id="name" />
          </div>
          <Button type="submit">Save</Button>
        </div>
      </DialogContent>
    </Dialog>
  );
}
```

## Accessibility Requirements (WCAG 2.1 AA)

### Semantic HTML

```typescript
// ✅ CORRECT: Semantic HTML with ARIA labels
<main>
  <h1>Customer List</h1>
  <nav aria-label="Customer navigation">
    <Button>New Customer</Button>
  </nav>
  <section aria-label="Customer table">
    <Table>
      {/* Table content */}
    </Table>
  </section>
</main>

// ❌ WRONG: Divs for everything
<div>
  <div className="title">Customer List</div>
  <div className="nav">...</div>
</div>
```

### ARIA Labels

```typescript
// ✅ CORRECT: Proper ARIA labels for icons
<Button aria-label="Delete customer Hofladen Müller">
  <TrashIcon />
</Button>

<Input
  aria-label="Search customers"
  aria-describedby="search-help"
  placeholder="Search..."
/>
<span id="search-help" className="sr-only">
  Search by company name, VAT number, or city
</span>

// ❌ WRONG: No ARIA labels for icons
<Button>
  <TrashIcon /> {/* No label - screen reader can't understand */}
</Button>
```

### Keyboard Navigation

```typescript
// ✅ CORRECT: Keyboard accessible
<Button
  onClick={handleSave}
  onKeyDown={(e) => e.key === 'Enter' && handleSave()}
>
  Save
</Button>

// ❌ WRONG: Mouse only
<div onClick={handleSave}>Save</div> // Not keyboard accessible
```

### Color Contrast

- Text must meet WCAG AA contrast ratio (4.5:1 for normal text)
- Use shadcn's color system (it's WCAG compliant by default)
- Test with browser DevTools or axe-core
- NEVER use color alone to convey information

## Mobile-First Responsive Design

### Touch Targets

```typescript
// ✅ CORRECT: 44px minimum touch target
<Button size="lg" className="min-h-[44px] min-w-[44px]">
  Save
</Button>

// ❌ WRONG: Small touch targets
<button className="h-6 w-6">X</button> // Too small for mobile
```

### Responsive Layout

```typescript
// ✅ CORRECT: Mobile-first with Tailwind
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
  {customers.map(customer => (
    <CustomerCard key={customer.id} customer={customer} />
  ))}
</div>

// ❌ WRONG: Desktop-only layout
<div className="flex"> {/* Breaks on mobile */}
  {customers.map(customer => (
    <div style={{width: '300px'}}> {/* Fixed width */}
      <CustomerCard customer={customer} />
    </div>
  ))}
</div>
```

## Loading States

### Loading Indicators

```typescript
// ✅ CORRECT: Show loading state with Skeleton
import { Skeleton } from '@/components/ui/skeleton';

function CustomerList() {
  const { data: customers, isLoading } = useCustomers();

  if (isLoading) {
    return (
      <div className="space-y-4">
        <Skeleton className="h-20 w-full" />
        <Skeleton className="h-20 w-full" />
        <Skeleton className="h-20 w-full" />
      </div>
    );
  }

  return <CustomerTable customers={customers} />;
}

// ❌ WRONG: No loading state
{customers && <CustomerList customers={customers} />}
// User sees blank screen while loading
```

### Button Loading States

```typescript
// ✅ CORRECT: Disabled button with loading indicator
import { Button } from '@/components/ui/button';
import { Loader2 } from 'lucide-react';

function SaveButton({ isLoading }: { isLoading: boolean }) {
  return (
    <Button disabled={isLoading}>
      {isLoading && <Loader2 className="mr-2 h-4 w-4 animate-spin" />}
      {isLoading ? 'Saving...' : 'Save'}
    </Button>
  );
}
```

## Form Components

### ✅ CORRECT: Using shadcn Form Components

```typescript
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';

function CustomerForm() {
  const form = useForm({
    resolver: zodResolver(customerSchema),
  });

  return (
    <Form {...form}>
      <form onSubmit={form.handleSubmit(onSubmit)}>
        <FormField
          control={form.control}
          name="companyName"
          render={({ field }) => (
            <FormItem>
              <FormLabel>Company Name</FormLabel>
              <FormControl>
                <Input {...field} />
              </FormControl>
              <FormMessage />
            </FormItem>
          )}
        />
        <Button type="submit">Save</Button>
      </form>
    </Form>
  );
}
```

## Table Components

### ✅ CORRECT: Using shadcn Table

```typescript
import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';

function CustomerTable({ customers }: { customers: Customer[] }) {
  return (
    <Table>
      <TableHeader>
        <TableRow>
          <TableHead>Company Name</TableHead>
          <TableHead>VAT Number</TableHead>
          <TableHead>City</TableHead>
          <TableHead>Actions</TableHead>
        </TableRow>
      </TableHeader>
      <TableBody>
        {customers.map(customer => (
          <TableRow key={customer.id}>
            <TableCell>{customer.companyName}</TableCell>
            <TableCell>{customer.vatNumber}</TableCell>
            <TableCell>{customer.address.city}</TableCell>
            <TableCell>
              <Button variant="ghost" size="sm">Edit</Button>
            </TableCell>
          </TableRow>
        ))}
      </TableBody>
    </Table>
  );
}
```

## Dialog and Modal Components

### ✅ CORRECT: Using shadcn Dialog

```typescript
import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';
import { Button } from '@/components/ui/button';

function CustomerDialog() {
  const [open, setOpen] = useState(false);

  return (
    <Dialog open={open} onOpenChange={setOpen}>
      <DialogTrigger asChild>
        <Button>New Customer</Button>
      </DialogTrigger>
      <DialogContent>
        <DialogHeader>
          <DialogTitle>Create Customer</DialogTitle>
        </DialogHeader>
        {/* Form content */}
      </DialogContent>
    </Dialog>
  );
}
```

## Component Customization

### ✅ CORRECT: Customizing shadcn Components

shadcn components can be customized by editing the component files directly:

```typescript
// apps/frontend/src/components/ui/button.tsx
// You can modify this file to customize the button
// All shadcn components are in your codebase, not in node_modules

export function Button({ className, variant = "default", ...props }) {
  return (
    <button
      className={cn(
        "inline-flex items-center justify-center rounded-md text-sm font-medium",
        // Your custom styles here
        className
      )}
      {...props}
    />
  );
}
```

### ❌ WRONG: Wrapping Components Unnecessarily

```typescript
// ❌ Don't wrap shadcn components unnecessarily
function MyButton(props: ButtonProps) {
  return <Button {...props} />; // Unnecessary wrapper
}

// ✅ Use shadcn components directly or customize the source file
```

## Component Library Reference

- **shadcn/ui Documentation**: https://ui.shadcn.com/
- **Radix UI Primitives**: https://www.radix-ui.com/primitives
- **Tailwind CSS**: https://tailwindcss.com/

## Summary

1. **ALWAYS** use shadcn/ui components (installed via CLI)
2. **NEVER** create custom UI components from scratch
3. **ALWAYS** ensure accessibility (ARIA labels, keyboard navigation)
4. **ALWAYS** use mobile-first responsive design
5. **ALWAYS** show loading states with Skeleton components
6. **ALWAYS** customize shadcn components by editing source files, not wrapping

## References

- Architecture Documentation: `docs/architectur/Projekt KOMPASS – Architekturdokumentation (Zielarchitektur).md`
- ADR-005: UI Component Library decision
