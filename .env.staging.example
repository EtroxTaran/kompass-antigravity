# KOMPASS Staging Environment Configuration
# Copy this file to .env.staging and fill in actual values
# NEVER commit actual .env files to git

# ============================================================================
# ENVIRONMENT
# ============================================================================
NODE_ENV=production
PORT=3000

# ============================================================================
# DATABASE (CouchDB)
# ============================================================================
STAGING_DATABASE_URL=http://couchdb:5984
STAGING_COUCHDB_USER=admin
STAGING_COUCHDB_PASSWORD=CHANGE_ME_SECURE_PASSWORD
STAGING_COUCHDB_DATABASE=kompass_staging

# ============================================================================
# SEARCH (MeiliSearch)
# ============================================================================
STAGING_MEILISEARCH_URL=http://meilisearch:7700
STAGING_MEILI_MASTER_KEY=CHANGE_ME_MIN_32_CHARS_KEY

# ============================================================================
# AUTHENTICATION (Keycloak)
# ============================================================================
# Keycloak is internal-only, accessed via Docker network
STAGING_KEYCLOAK_URL=http://keycloak:8080
STAGING_KEYCLOAK_REALM=kompass-staging
STAGING_KEYCLOAK_CLIENT_ID=kompass-api-staging
STAGING_KEYCLOAK_CLIENT_SECRET=CHANGE_ME_CLIENT_SECRET

# Keycloak Admin (for setup)
STAGING_KEYCLOAK_ADMIN=admin
STAGING_KEYCLOAK_ADMIN_PASSWORD=CHANGE_ME_KEYCLOAK_PASSWORD

# ============================================================================
# JWT
# ============================================================================
# Generate with: openssl rand -base64 32
STAGING_JWT_SECRET=CHANGE_ME_MIN_32_CHARS_RANDOM_STRING
STAGING_JWT_EXPIRATION=24h
STAGING_JWT_REFRESH_EXPIRATION=7d

# ============================================================================
# CORS
# ============================================================================
STAGING_ALLOWED_ORIGINS=https://kompass.etrox.de

# ============================================================================
# FRONTEND
# ============================================================================
# Frontend calls backend API via public Traefik route
STAGING_API_URL=https://api.kompass.etrox.de

# ============================================================================
# LOGGING
# ============================================================================
LOG_LEVEL=info

# ============================================================================
# DEPLOYMENT
# ============================================================================
STAGING_HOST=kompass.etrox.de
STAGING_USER=deploy
GITHUB_REPOSITORY=your-org/kompass
REGISTRY=ghcr.io

# ============================================================================
# PostgreSQL (for Keycloak)
# ============================================================================
# Keycloak uses PostgreSQL for its database
STAGING_POSTGRES_HOST=postgres
STAGING_POSTGRES_USER=keycloak
STAGING_POSTGRES_PASSWORD=CHANGE_ME_POSTGRES_PASSWORD

# ============================================================================
# n8n (Internal Only)
# ============================================================================
# n8n is accessed internally by backend via Docker network
# If webhooks need external access, expose n8n via Traefik at n8n.kompass.etrox.de
STAGING_N8N_WEBHOOK_URL=http://n8n:5678
STAGING_N8N_HOST=n8n.kompass.etrox.de

# ============================================================================
# URLs (Public via Traefik)
# ============================================================================
# Frontend and Backend API are exposed via existing Traefik
# Traefik handles Let's Encrypt certificates automatically
STAGING_URL=https://kompass.etrox.de

# ============================================================================
# OPTIONAL: Email (for notifications)
# ============================================================================
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=noreply@kompass.de
SMTP_PASSWORD=CHANGE_ME
SMTP_FROM=noreply@kompass.de

# ============================================================================
# OPTIONAL: Monitoring
# ============================================================================
SENTRY_DSN=https://xxx@sentry.io/xxx
SENTRY_ENVIRONMENT=staging


